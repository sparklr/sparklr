/*!
 * Copyright by Oleg Efimov and node-mysql-libmysqlclient contributors
 * See contributors list in README
 *
 * See license text in LICENSE file
 */

/*!
 * Require bindings native binary
 */
var bindings = null;
try {
  bindings = require('../build/' + (process.platform == "win32" ? (process.arch == "x64" ? "win64" : "win32") : "Release") + '/mysql_bindings');
} catch(e) {
	throw new Exception("MySQL is not available");
}

exports.bindings = bindings;

exports.createConnectionSync = function createConnectionSync() {
  var connection = new bindings.MysqlConnection(), args;
  args = Array.prototype.slice.call(arguments, 0, 7);

  if (args.length > 0) {
    // connection.constructor.prototype == bindings.MysqlConnection.prototype;
    bindings.MysqlConnection.prototype.connectSync.apply(connection, args);
  }

  return connection;
};

