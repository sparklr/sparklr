<% if (data.user == CURUSER) %>
<div id='profileheader' class='profileheader' onDrop='dropImage(event, headerUploadCallback);' onDragEnter='dropPrevent(event);' onDragOver='dropPrevent(event);'>
<% else %>
<div class='profileheader' id='profileheader'>
<% endelse %>
	<img class='useravatar' id='useravatar' src='{ imgUrl(data.user,true) }' onDrop='dropImage(event, avatarUploadCallback);' onDragEnter='dropPrevent(event);' onDragOver='dropPrevent(event);'><br>
	<p id='userDisplayName'>{ getDisplayName(data.user) }</p>
	<p>@{getUserHandle(data.user)}</p>
	<p id='userBio'>{processMedia(data.bio.replace(/\n/g,'<br>'),true)}</p>
	<% if (HIDDEN_USERS.indexOf(data.user.toString()) != -1) %>
	<p class='headersubtitle'><b>You have hidden this user. <a href='/#/settings/blacklist' style='text-decoration:underline'>Change Settings</a></b></p>
	<% endif %>
	<div style='position: absolute; bottom: 10px; left: 9px;'>
		<% if (data.user != CURUSER) %>
			<% if (data.following) %>	
				<input type='button' onclick='unfollow("{data.user}");' value='Unfollow'>
			<% else %>
				<input type='button' onclick='follow("{data.user}");' value='Follow'>
			<% endelse %>
			<input type='button' onclick='chatWith("{data.user}");' value='Message'>
		<% endif %>
		<input type='button' onclick='location.href="/#/user/{data.user}/mentions"' value='Mentions'>
		<input type='button' onclick='location.href="/#/user/{data.user}/photos"' value='Photos'>
	</div>
	<% if (data.user == CURUSER) %> 
		<% if (!MOBILE) %>
			<div style='position: absolute; top: 10px; right: 5px;'>
				<input type='button' onclick='location.href="#/settings"' value='Settings'>
				<input type='button' onclick='signOff();' value='Sign off'>
			</div>
		<% endif %>
		<input type='button' id='editBtn' onclick='editProfile()' value='Edit'>
	<% endif %>
</div>
<div class='grid'>
	<div id='newposts' onclick='showMissingPosts()'></div>
	<div id='timeline_container'>
		<div id='editContainer' style='display:none' class='timelineitem'>
			<b>Avatar</b><br>
			<input type='file' onchange='loadImage(this.files[0], avatarUploadCallback)'><br>
			<b>Header</b><br>
				<input type='file' onchange='loadImage(this.files[0], headerUploadCallback)'><br>
		</div>
	</div>
</div>

